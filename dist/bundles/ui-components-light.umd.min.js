!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/forms","@angular/core"],t):t(e["ui-components-light"]={},e.ng.common,e.ng.forms,e.ng.core)}(this,function(e,t,n,r){"use strict";var o,a=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){function e(){}return e.forChild=function(){return{ngModule:e,providers:[]}},e}();function i(e){return e instanceof Array}function u(e){return e instanceof Date&&!isNaN(e.valueOf())}function c(e){return"function"==typeof e}function l(e,t){if(!e)throw new Error("** Assertion failed in Wijmo: "+t)}function p(e){return"number"==typeof e}function d(e,t){return void 0===t&&(t=!0),l(t&&null==e||c(e),"Function expected."),e}function m(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),l(t&&null==e||p(e),"Number expected."),n&&e&&e<0)throw new Error("Positive number expected.");return e}function f(e,t){return void 0===t&&(t=!1),l(t&&null==e||function n(e){return"boolean"==typeof e}(e),"Boolean expected."),e}s.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,n.FormsModule],declarations:[],exports:[]}]}],s.ctorParameters=function(){return[]};var h=function(){function e(e){this._idx=-1,this._newItem=null,this._edtItem=null,this._pgSz=0,this._pgIdx=0,this._updating=0,this._canFilter=!0,this._canGroup=!0,this._canSort=!0,this._canAddNew=!0,this._canCancelEdit=!0,this._canRemove=!0,this._canChangePage=!0,this._trackChanges=!1,this._pgView=e}return Object.defineProperty(e.prototype,"newItemCreator",{get:function(){return this._itemCreator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(e){this._srtCvt},enumerable:!0,configurable:!0}),e.prototype.implementsInterface=function(e){switch(e){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1},Object.defineProperty(e.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(e){},enumerable:!0,configurable:!0}),e}();function g(e){return"string"==typeof e}function S(e,t){return void 0===t&&(t=!0),l(t&&null==e||g(e),"String expected."),e}function b(e,t,n){return void 0===n&&(n=!1),e=function r(e,t){return null==e?null:g(t)?c(e.implementsInterface)&&e.implementsInterface(t)?e:null:e instanceof t?e:null}(e,t),l(n||null!=e,t+" expected."),e}function y(e,t){if(e&&e.getAttribute){var n=new RegExp("\\b"+t+"\\b");return e&&n.test(e.getAttribute("class"))}return!1}function _(e,t){if(e&&e.setAttribute&&!y(e,t)){var n=e.getAttribute("class");e.setAttribute("class",n?n+" "+t:t)}}function v(e,t){for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1}function w(e,t,n){n?_(e,t):function o(e,t){if(e&&e.setAttribute&&y(e,t)){var n=new RegExp("\\s?\\b"+t+"\\b","g"),r=e.getAttribute("class");e.setAttribute("class",r.replace(n,""))}}(e,t)}function F(e){return e instanceof HTMLElement?e:g(e)?document.querySelector(e):e&&e.jquery?e[0]:null}var A={Globalize:{numberFormat:{NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencySymbol:"$",".":".",",":",",percent:{pattern:["-n %","n %"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},dateTimeFormat:{TimeSeparator:"/",DateSeparator:":","/":"/",":":":"},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}},MultiSelect:{itemsSelected:"{count:n0} items selected"},FlexGrid:{groupHeaderFormat:"{name}: <b>{value} </b>({count:n0} items)"},FlexGridFilter:{ascending:"↑ Ascending",descending:"↓ Descending",apply:"Apply",clear:"Clear",conditions:"Filter by Condition",values:"Filter by Value",search:"Search",selectAll:"Select All","null":"(nothing)",header:"Show items where the value",and:"And",or:"Or",stringOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1},{name:"Begins with",op:6},{name:"Ends with",op:7},{name:"Contains",op:8},{name:"Does not contain",op:9}],numberOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1},{name:"Is Greater than",op:2},{name:"Is Greater than or equal to",op:3},{name:"Is Less than",op:4},{name:"Is Less than or equal to",op:5}],dateOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Is Before",op:4},{name:"Is After",op:3}],booleanOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1}]}},I=function(){function r(){}return r.addDays=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},r.addMonths=function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,e.getDate())},r.addYears=function(e,t){return new Date(e.getFullYear()+t,e.getMonth(),e.getDate())},r.addHours=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t)},r.addMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+t)},r.addSeconds=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()+t)},r.sameDate=function(e,t){return u(e)&&u(t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},r.sameTime=function(e,t){return u(e)&&u(t)&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()&&e.getSeconds()==t.getSeconds()},r.equals=function(e,t){return u(e)&&u(t)&&e.getTime()==t.getTime()},r.fromDateTime=function(e,t){return e||t?(e||(e=t),t||(t=e),new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())):null},r.toFiscal=function(e,t){var n=A.Globalize.calendar;return i(n.fiscalYearOffsets)?r.addMonths(e,-n.fiscalYearOffsets[t?0:1]):e},r.fromFiscal=function(e,t){var n=A.Globalize.calendar;return i(n.fiscalYearOffsets)?r.addMonths(e,+n.fiscalYearOffsets[t?0:1]):e},r.clone=function(e){return r.fromDateTime(e,e)},r}(),M=function(){function T(){}return T.format=function(e,t,n,r){return t||(p(e)?t=e==Math.round(e)?"n0":"n2":u(e)&&(t="d")),p(e)?T.formatNumber(e,t,n,r):u(e)?T.formatDate(e,t):null!=e?e.toString():""},T.formatNumber=function(e,t,n,r){var o;m(e),S(t);var a=t?t.match(/([a-z])(\d*)(,*)(.*)/i):null,s=A.Globalize.numberFormat,i=a?a[1].toLowerCase():"n",u=a&&a[2]?parseInt(a[2]):"c"==i?s.currency.decimals:e==Math.round(e)?0:2,c=a&&a[3]?3*a[3].length:0,l=a&&a[4]?a[4]:s.currency.symbol,p=s["."],d=s[","];if(c&&(e/=Math.pow(10,c)),"d"==i||"x"==i){for(o=Math.round(Math.abs(e)).toString("d"==i?10:16);o.length<u;)o="0"+o;return e<0&&(o="-"+o),t&&"X"==t[0]&&(o=o.toUpperCase()),o}if("p"==i&&(e*=100),r&&(e=function g(e,t,n){if(n){var r=(o=e.toString()).indexOf(".");-1<r&&(o=o.substr(0,r+1+t),e=parseFloat(o))}else{var o=e.toFixed(t);e=parseFloat(o)}return e}(e,u,!0)),o="c"==i||"p"==i?Math.abs(e).toFixed(u):e.toFixed(u),(n||"g"==i)&&-1<o.indexOf(".")&&(o=(o=o.replace(/(\.[0-9]*?)0+$/g,"$1")).replace(/\.$/,"")),"."!=p&&(o=o.replace(".",p)),d&&("n"==i||"c"==i||"p"==i)){var f=o.indexOf(p),h=/\B(?=(\d\d\d)+(?!\d))/g;o=-1<f?o.substr(0,f).replace(h,d)+o.substr(f):o.replace(h,d)}"c"==i&&(o=s.currency.pattern[e<0?0:1].replace("n",o).replace("$",l));"p"==i&&(o=s.percent.pattern[e<0?0:1].replace("n",o));return o},T.formatDate=function(e,t){switch(e=function a(e,t){return void 0===t&&(t=!1),l(t&&null==e||u(e),"Date expected."),e}(e),t){case"r":case"R":return e.toUTCString();case"u":return e.toISOString().replace(/\.\d{3}/,"")}t=T._expandFormat(t);for(var n=T._parseDateFormat(t),r="",o=0;o<n.length;o++)r+=T._formatDatePart(e,t,n[o]);return r},T.parseInt=function(e,t){return Math.round(T.parseFloat(e,t))},T.parseFloat=function(e,t){var n=-1<e.indexOf("-")||-1<e.indexOf("(")&&-1<e.indexOf(")")?-1:1,r=-1<e.indexOf("%")?.01:1,o=t?t.match(/,+/):null,a=o?3*o[0].length:0;if(t&&("x"==t[0]||"X"==t[0]))return e=e.replace(/[^0-9a-f]+.*$/gi,""),parseInt(e,16)*n*r*Math.pow(10,a);var s=A.Globalize.numberFormat["."],i=new RegExp("[^\\d\\"+s+"]","g");e=e.replace(i,"").replace(s,".");return parseFloat(e)*n*r*Math.pow(10,a)},T.parseDate=function(e,t){if(!(e=S(e)))return null;if("u"==t)return new Date(e);if("R"==t||"r"==t){var n=e.match(/(([0-9]+)\-([0-9]+)\-([0-9]+))?\s?(([0-9]+):([0-9]+)(:([0-9]+))?)?/);if(n[1]||n[5]){var r=n[1]?new Date(parseInt(n[2]),parseInt(n[3])-1,parseInt(n[4])):new Date;n[5]&&(r.setHours(parseInt(n[6])),r.setMinutes(parseInt(n[7])),r.setSeconds(n[8]?parseInt(n[9]):0))}else r=new Date(e);return isNaN(r.getTime())?null:r}t=T._expandFormat(t||"d");var o,a,s,i,u,c=A.Globalize.calendar,l=T._CJK,p=new RegExp("(\\"+c["/"]+")|(\\"+c[":"]+")|(\\d+)|(["+l+"\\.]{2,})|(["+l+"]+)","gi"),d=e.match(p),f=T._parseDateFormat(t),h=0,g=-1,m=0,b=1,y=0,_=0,v=0,w=0,F=-1;if(!(d&&d.length&&f&&f.length))return null;for(var M=0;M<f.length&&d;M++){var D=M-h,x=-1<D&&D<d.length?d[D]:"",E=f[M].length;switch(f[M]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":u=f[M];case"yyyy":case"yyy":case"yy":case"y":1<E&&x.length>E&&(d[D]=x.substr(E),x=x.substr(0,E),h++),g=parseInt(x);break;case"MMMM":case"MMM":i=!0;var j=x.toLowerCase();m=-1;for(var C=0;C<12;C++)if(0==c.months[C].toLowerCase().indexOf(j)){m=C;break}break;case"MM":case"M":1<E&&x.length>E&&(d[D]=x.substr(E),x=x.substr(0,E),h++),m=parseInt(x)-1,i=!0;break;case"dddd":case"ddd":o=!0;break;case"dd":case"d":1<E&&x.length>E&&(d[D]=x.substr(E),x=x.substr(0,E),h++),b=parseInt(x),a=!0;break;case"hh":case"h":1<E&&x.length>E&&(d[D]=x.substr(E),x=x.substr(0,E),h++),y=12==(y=parseInt(x))?0:y;break;case"HH":1<E&&x.length>E&&(d[D]=x.substr(E),x=x.substr(0,E),h++),y=parseInt(x);break;case"H":y=parseInt(x);break;case"mm":case"m":1<E&&x.length>E&&(d[D]=x.substr(E),x=x.substr(0,E),h++),_=parseInt(x);break;case"ss":case"s":1<E&&x.length>E&&(d[D]=x.substr(E),x=x.substr(0,E),h++),v=parseInt(x);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":w=parseInt(x)/Math.pow(10,E-3);break;case"tt":case"t":x=x.toUpperCase(),(c.pm[0]&&x==c.pm[0]&&y<12||c.pm[1]&&x==c.pm[1]&&y<12)&&(y+=12);break;case"q":case"Q":case"u":case"U":s=!0;break;case"ggg":case"gg":case"g":F=1<c.eras.length?T._getEra(x,c):-1;break;case c["/"]:case c[":"]:if(x&&x!=f[M])return null;break;case"K":break;default:T._unquote(f[M])!=x&&h++}}if(i&&a&&(isNaN(y)&&(y=0),isNaN(_)&&(_=0),isNaN(v)&&(v=0)),m<0||11<m||isNaN(m)||b<0||31<b||isNaN(b)||y<0||24<y||isNaN(y)||_<0||60<_||isNaN(_)||v<0||60<v||isNaN(v))return null;if(u){if(!i)return null;r=new Date(g,m),g=(r=I.fromFiscal(r,"E"==u[0])).getFullYear(),m=r.getMonth()}return o&&!a?null:s&&!i?null:(g<0&&(g=(new Date).getFullYear()),-1<F?g=g+c.eras[F].start.getFullYear()-1:g<100&&(g+=30<=g?1900:2e3),r=new Date(g,m,b,y,_+0,v,w),isNaN(r.getTime())?null:r)},T.getFirstDayOfWeek=function(){var e=A.Globalize.calendar.firstDay;return e||0},T.getNumberDecimalSeparator=function(){var e=A.Globalize.numberFormat["."];return e||"."},T._unquote=function(e){return 1<e.length&&e[0]==e[e.length-1]&&("'"==e[0]||'"'==e[0])?e.substr(1,e.length-2):e},T._parseDateFormat=function(e){if(e in T._dateFomatParts)return T._dateFomatParts[e];var t,n,r=[];for(t=0;-1<t&&t<e.length;t++){var o=e[t];if(("'"==o||'"'==o)&&-1<(n=e.indexOf(o,t+1)))r.push(e.substring(t,n+1)),t=n;else{for(n=t+1;n<e.length&&e[n]==o;n++);r.push(e.substring(t,n)),t=n-1}}return T._dateFomatParts[e]=r},T._formatDatePart=function(e,t,n){var r,o=A.Globalize.calendar,a=0,s=0,i=0,u=n.length;switch(n){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":return s=(r="E"==n[0]?I.toFiscal(e,!0):"e"==n[0]?I.toFiscal(e,!1):e).getFullYear(),1<o.eras.length&&-1<t.indexOf("g")&&-1<(a=T._getEra(e,o))&&(s=s-o.eras[a].start.getFullYear()+1),T._zeroPad(s,4).substr(4-n.length);case"MMMM":return o.months[e.getMonth()];case"MMM":return o.monthsAbbr[e.getMonth()];case"MM":case"M":return T._zeroPad(e.getMonth()+1,u);case"dddd":return o.days[e.getDay()];case"ddd":return o.daysAbbr[e.getDay()];case"dd":return T._zeroPad(e.getDate(),2);case"d":return e.getDate().toString();case"hh":case"h":return T._zeroPad(T._h12(e),u);case"HH":case"H":return T._zeroPad(e.getHours(),u);case"mm":case"m":return T._zeroPad(e.getMinutes(),u);case"ss":case"s":return T._zeroPad(e.getSeconds(),u);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":return i=e.getMilliseconds()*Math.pow(10,u-3),"f"==n[0]?T._zeroPad(i,u):i.toFixed(0);case"tt":return e.getHours()<12?o.am[0]:o.pm[0];case"t":return e.getHours()<12?o.am[1]:o.pm[1];case"q":case"Q":return(Math.floor(e.getMonth()/3)+1).toString();case"u":case"U":return r=I.toFiscal(e,"U"==n),(Math.floor(r.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":return 1<o.eras.length&&-1<(a=T._getEra(e,o))?"ggg"==n?o.eras[a].name:"gg"==n?o.eras[a].name[0]:o.eras[a].symbol:o.eras[0];case":":case"/":return o[n];case"K":var c=e.toString().match(/(\+|\-)(\d{2})(\d{2})/);return c?c[1]+c[2]+c[3]:""}return 1<u&&n[0]==n[u-1]&&('"'==n[0]||"'"==n[0])?n.substr(1,u-2):n},T._getEra=function(e,t){if(u(e)){for(var n=0;n<t.eras.length;n++)if(e>=t.eras[n].start)return n}else if(g(e))for(n=0;n<t.eras.length;n++)if(t.eras[n].name&&(0==t.eras[n].name.indexOf(e)||0==t.eras[n].symbol.indexOf(e)))return n;return-1},T._expandFormat=function(e){var t=A.Globalize.calendar.patterns[e];return t||e},T._zeroPad=function(e,t){var n=e.toFixed(0),r=t-n.length+1;return 0<r?Array(r).join("0")+n:n},T._h12=function(e){var t=A.Globalize.calendar,n=e.getHours();return t.am&&t.am[0]&&0==(n%=12)&&(n=12),n},T}();M._CJK="a-zu00C0-u017Fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u"),M._dateFomatParts={};var D=function k(e,t){this.handler=e,this.self=t},x=function N(){};x.empty=new x;var E=function(){function e(){this._handlers=[]}return e.prototype.addHandler=function(e,t){d(e),this._handlers.push(new D(e,t))},e.prototype.removeHandler=function(e,t){d(e);for(var n=0;n<this._handlers.length;n++){var r=this._handlers[n];if((r.handler==e||null==e)&&(r.self==t||null==t)&&(this._handlers.splice(n,1),e&&t))break}},e.prototype.removeAllHandlers=function(){this._handlers.length=0},e.prototype.raise=function(e,t){void 0===t&&(t=x.empty);for(var n=0;n<this._handlers.length;n++){var r=this._handlers[n];r.handler.call(r.self,e,t)}},Object.defineProperty(e.prototype,"hasHandlers",{get:function(){return 0<this._handlers.length},enumerable:!0,configurable:!0}),e}(),j=function(){function a(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this._focus=!1,this._updating=0,this._fullUpdate=!1,this.gotFocus=new E,this.lostFocus=new E,console.log("control_constructor");var r=F(e),o=((this._e=r)[a._DATA_KEY]=this)._handleDisabled.bind(this);this.addEventListener(r,"click",o,!0)}return a.prototype._handleDisabled=function(e){this.disabled&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())},Object.defineProperty(a.prototype,"disabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(e){(e=f(e,!0))!=this.disabled&&function n(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","true"),w(e,"wj-state-disabled",!t)}(this._e,!e)},enumerable:!0,configurable:!0}),a.prototype.addEventListener=function(e,t,n,r){void 0===r&&(r=!1),e&&(e.addEventListener(t,n,r),null==this._listeners&&(this._listeners=[]),this._listeners.push({target:e,type:t,fn:n,capture:r}))},a.prototype.applyTemplate=function(e,t,n,r){console.log("apply_template_start");var o=this._e;e&&_(o,e);var a=null;if(t&&(a=function c(e){var t=document.createElement("div");return t.innerHTML=e,t.removeChild(t.firstChild)}(t),a=o.appendChild(a)),o&&!o.getAttribute("tabindex")&&(o.tabIndex=o.querySelector("input")?-1:0),n)for(var s in n){var i=n[s];if(this[s]=a.querySelector('[wj-part="'+i+'"]'),null==this[s]&&a.getAttribute("wj-part")==i&&(this[s]=a),null==this[s])throw'Missing template part: "'+i+'"';if(i==r){var u=o.attributes.name;u&&u.value&&this[s].setAttribute("name",u.value),(u=o.attributes.accesskey)&&u.value&&(this[s].setAttribute("accesskey",u.value),o.removeAttribute("accesskey"))}}return console.log("apply_template_finish"),a},a.prototype.getTemplate=function(){return null},a.getControl=function(e){var t=F(e);return t?b(t[a._DATA_KEY],a,!0):null},a.prototype.initialize=function(e){e&&function a(e,t){for(var n in t){l(n in e,'Unknown key "'+n+'".');var r=t[n];e._copy&&e._copy(n,r)||(e[n]instanceof Event&&c(r)?e[n].addHandler(r):null==(o=r)||"object"!=typeof o||u(o)||i(o)||!e[n]?e[n]=r:a(e[n],r))}var o}(this,e)},Object.defineProperty(a.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isTouching",{get:function(){return a._touching},enumerable:!0,configurable:!0}),a.prototype._updateFocusState=function(){var r=this;setTimeout(function(){var e=r.containsFocus();if(e!=r._focus&&((r._focus=e)?r.onGotFocus():r.onLostFocus(),w(r._e,"wj-state-focused",e)),r._e)for(var t=r._e.parentElement;t;t=t.parentElement){var n=a.getControl(t);if(n){n._updateFocusState();break}}})},a.prototype.containsFocus=function(){if(!this._e)return!1;for(var e=this._e.getElementsByClassName("wj-control"),t=0;t<e.length;t++){var n=a.getControl(e[t]);if(n&&n!=this&&n.containsFocus())return!0}return v(this._e,document.activeElement)},a.prototype.onGotFocus=function(e){this.gotFocus.raise(this,e)},a.prototype.onLostFocus=function(e){this.lostFocus.raise(this,e)},a}();j._DATA_KEY="wj-Control",j._REFRESH_INTERVAL=10;var C=function(t){function e(){var e=t.apply(this,arguments)||this;return e.cancel=!1,e}return a(e,t),e}(x),T=function(r){function e(e,t){var n=r.call(this,e,!0)||this;n._showBtn=!0,n._autoExpand=!0,n.isDroppedDownChanged=new E,n.isDroppedDownChanging=new E,n.textChanged=new E,console.log("drop_down_constructor_start");return n.applyTemplate("wj-control wj-dropdown wj-content",'<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>',{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input"),n._elRef=n._tbx,n._tbx.autocomplete="off",n._updateBtn(),n.addEventListener(n._dropDown,"blur",function(){n._updateFocusState()},!0),n.addEventListener(n._tbx,"input",function(){n._setText(n.text,!1)}),n.addEventListener(n._tbx,"click",function(){n._autoExpand&&n._expandSelection()}),n.addEventListener(n.dropDown,"focus",function(){n._updateFocusState()}),n.addEventListener(n._btn,"click",n._btnclick.bind(n)),n.addEventListener(n._dropDown,"click",function(e){e.stopPropagation()}),console.log("drop_down_constructor_finish"),n}return a(e,r),Object.defineProperty(e.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),e.prototype._updateBtn=function(){this._btn.tabIndex=-1,this._btn.style.display=this._showBtn?"":"none"},e.prototype._getCharType=function(e,t){var n=e[t];return"0"<=n&&n<="9"?0:"a"<=n&&n<="z"||"A"<=n&&n<="Z"?1:-1},e.prototype._expandSelection=function(){var e=this._tbx,t=e.value,n=e.selectionStart,r=e.selectionEnd;if(t&&n==r){var o=this._getCharType(t,n);if(-1<o){for(;r<t.length&&this._getCharType(t,r)==o;r++);for(;0<n&&this._getCharType(t,n-1)==o;n--);n!=r&&e.setSelectionRange(n,r)}}},e.prototype._btnclick=function(e){this.isDroppedDown=!this.isDroppedDown},Object.defineProperty(e.prototype,"isDroppedDown",{get:function(){return"none"!=this._dropDown.style.display},set:function(e){if((e=f(e)&&!this.disabled)!=this.isDroppedDown&&this.onIsDroppedDownChanging(new C)){var t=this._dropDown;e?(t.style.minWidth||(t.style.minWidth=this.hostElement.getBoundingClientRect().width+"px"),t.style.display="block",this._updateDropDown()):(this.containsFocus()&&(this.isTouching&&this.showDropDownButton||(this.selectAll(),console.log("select_all"))),t.style.display="none"),this._updateFocusState(),this.onIsDroppedDownChanged()}},enumerable:!0,configurable:!0}),e.prototype.onIsDroppedDownChanged=function(e){this.isDroppedDownChanged.raise(this,e)},e.prototype._updateDropDown=function(){this.isDroppedDown&&console.log("update_drop_down")},Object.defineProperty(e.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(e){this._showBtn=f(e),this._updateBtn()},enumerable:!0,configurable:!0}),e.prototype.containsFocus=function(){return r.prototype.containsFocus.call(this)||v(this._dropDown,document.activeElement)},e.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDownChanging.raise(this,e),console.log("changing"),!e.cancel},e.prototype.onLostFocus=function(e){this._commitText(),this.containsFocus()||(this.isDroppedDown=!1),console.log("on_lost_focus"),r.prototype.onLostFocus.call(this,e)},e.prototype._commitText=function(){},e.prototype.onGotFocus=function(e){this.isTouching||this.selectAll(),console.log("on_got_focus"),r.prototype.onGotFocus.call(this,e)},e.prototype.selectAll=function(){this._elRef==this._tbx&&function o(e,t,n){if(void 0===n&&(n=t),e=b(e,HTMLInputElement),v(document.body,e)&&!e.disabled&&"none"!=e.style.display)try{e.setSelectionRange(m(t),m(n)),e.focus()}catch(r){}}(this._tbx,0,this.text.length)},Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&this._setText(e,!0)},enumerable:!0,configurable:!0}),e.prototype._setText=function(e,t){null==e&&(e=""),(e=e.toString())!=this._tbx.value&&(this._tbx.value=e),e!=this._oldText&&(this._oldText=e,this.onTextChanged())},e.prototype.onTextChanged=function(e){this.textChanged.raise(this,e)},e}(j);T.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>';var O=function(o){function e(e,t){var n=o.call(this,e)||this;n._html=!1,n._search="",n.applyTemplate("wj-control wj-listbox wj-content",null,null),n._orgTag;var r=n.hostElement;return n.addEventListener(r,"click",n._click.bind(n)),n}return a(e,o),e.prototype._click=function(e){console.log("click on list box");for(var t=this.hostElement.children,n=0;n<t.length;n++)if(v(t[n],e.target)){this.selectedIndex=n,console.log("list_box_selected_index_set");break}},e.prototype.refresh=function(){},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return 1},set:function(e){this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(e){this._items!=e&&(this._items=e,this._cv=function n(e,t){return void 0===t&&(t=!0),null==e&&t?null:new h(e)}(e),this._populateList())},enumerable:!0,configurable:!0}),e.prototype._populateList=function(){var e=this.hostElement;if(e){if(e.innerHTML="",this._cv)for(var t=0;t<this._cv.items.length;t++){var n=this._cv.items[t].name;this._html;var r=document.createElement("div");r.innerHTML=n,r.className="wj-listbox-item",y(r.firstChild,"wj-separator")&&(r.className+=" wj-separator"),e.appendChild(r)}0==e.children.length&&e.appendChild(document.createElement("div"))}},e.prototype.showSelection=function(){console.log("show selection _started");for(var e,t=this.selectedIndex,n=this.hostElement,r=n.children,o=0;o<r.length;o++)e=r[o];if(-1<t&&t<r.length){var a=(e=r[t]).getBoundingClientRect(),s=this.hostElement.getBoundingClientRect();a.bottom>s.bottom?n.scrollTop+=a.bottom-s.bottom:a.top<s.top&&(n.scrollTop-=s.top-a.top)}-1<t&&this.containsFocus()&&(e=r[t])instanceof HTMLElement&&!v(e,document.activeElement)&&e.focus(),console.log("show selection _finished")},e}(j),P=function(r){function e(e,t){var n=r.call(this,e)||this;return n._required=!0,n._editable=!1,n._composing=!1,n._deleting=!1,n._settingText=!1,console.log("combo_constructor_start"),n._lbx=new O(n._dropDown),n.addEventListener(n._tbx,"compositionstart",function(){n._composing=!0}),n.addEventListener(n._tbx,"compositionend",function(){n._composing=!1,n._setText(n.text,!0)}),n.initialize(t),console.log("combo_constructor_finish"),n}return a(e,r),e.prototype._setText=function(e,t){console.log("combo_box_set_text_start"),this._composing||this._settingText||(this._settingText=!0,null==e&&(e=""),e=e.toString(),r.prototype._setText.call(this,e,t),console.log("combo_box_set_text_finish"))},Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource=e,this._updateBtn()},enumerable:!0,configurable:!0}),e.prototype._createDropDown=function(){console.log("create drop down")},e}(T);e.DropDown=T,e.ComboBox=P,e.ClarityModule=s,e.ɵa=j,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ui-components-light.umd.min.js.map
