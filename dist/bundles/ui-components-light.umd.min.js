!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/forms","@angular/core"],t):t(e["ui-components-light"]={},e.ng.common,e.ng.forms,e.ng.core)}(this,function(e,t,n,o){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){function e(){}return e.forChild=function(){return{ngModule:e,providers:[]}},e}();function a(e){return e instanceof Array}function c(e){return e instanceof Date&&!isNaN(e.valueOf())}function l(e){return"function"==typeof e}function u(e,t){if(!e)throw new Error("** Assertion failed in Wijmo: "+t)}function p(e){return"number"==typeof e}function d(e,t){return void 0===t&&(t=!0),u(t&&null==e||l(e),"Function expected."),e}function _(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),u(t&&null==e||p(e),"Number expected."),n&&e&&e<0)throw new Error("Positive number expected.");return e}function h(e,t){return void 0===t&&(t=!1),u(t&&null==e||function n(e){return"boolean"==typeof e}(e),"Boolean expected."),e}s.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,n.FormsModule],declarations:[],exports:[]}]}],s.ctorParameters=function(){return[]};var f=function k(){};f.empty=new f;var g=function(t){function e(){var e=t.apply(this,arguments)||this;return e.cancel=!1,e}return i(e,t),e}(f),m=function(){function e(e){this._idx=-1,this._newItem=null,this._edtItem=null,this._pgSz=0,this._pgIdx=0,this._updating=0,this._canFilter=!0,this._canGroup=!0,this._canSort=!0,this._canAddNew=!0,this._canCancelEdit=!0,this._canRemove=!0,this._canChangePage=!0,this._trackChanges=!1,this.currentChanged=new o.EventEmitter,this.currentChanging=new o.EventEmitter,this.collectionChanged=new o.EventEmitter,console.log("collection_view_constructor_started"),this._pgView=e,this.sourceCollection=e,console.log("collection_view_constructor_finished")}return Object.defineProperty(e.prototype,"newItemCreator",{get:function(){return this._itemCreator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(e){this._srtCvt},enumerable:!0,configurable:!0}),e.prototype.implementsInterface=function(e){switch(e){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1},Object.defineProperty(e.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.moveCurrentTo=function(e){return console.log("collection_view_1"),this.moveCurrentToPosition(this._pgView.indexOf(e))},e.prototype.moveCurrentToFirst=function(){return console.log("collection_view_2"),this.moveCurrentToPosition(0)},e.prototype.moveCurrentToLast=function(){return console.log("collection_view_3"),this.moveCurrentToPosition(this._pgView.length-1)},e.prototype.moveCurrentToNext=function(){return console.log("collection_view_4"),this.moveCurrentToPosition(this._idx+1)},e.prototype.moveCurrentToPosition=function(e){if(-1<=e&&e<this._pgView.length){var t=new g;this._idx!=e&&this.onCurrentChanging(t)&&(this._edtItem&&(this._pgView[e],this._edtItem),this._newItem&&(this._pgView[e],this._newItem),console.log("collection_view_updating_index!!!!!"),this._idx=e,this.onCurrentChanged())}return this._idx==e},e.prototype.onCurrentChanged=function(e){void 0===e&&(e=f.empty),this.currentChanged.emit(e)},e.prototype.onCurrentChanging=function(e){return this.currentChanging.emit(e),!e.cancel},Object.defineProperty(e.prototype,"currentItem",{get:function(){return this._pgView&&-1<this._idx&&this._idx<this._pgView.length?this._pgView[this._idx]:null},set:function(e){this.moveCurrentTo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPosition",{get:function(){return console.log("collection_view_current_postion:"+this._idx),this._idx},enumerable:!0,configurable:!0}),e.prototype.removeAt=function(e){e=function r(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!1);if(u(t&&null==e||function o(e){return p(e)&&e==Math.round(e)}(e),"Integer expected."),n&&e&&e<0)throw"Positive integer expected.";return e}(e),this.remove(this._pgView[e])},e.prototype.remove=function(e){console.log("collection_view_remove_started"),e==this._newItem&&(this._newItem=null),e==this._edtItem&&console.log("collection_view_cancel_edit");var t=this._src.indexOf(e);if(-1<t){var n=this.currentItem;this._updating++,this._src.splice(t,1),this._updating--;this._digest;console.log("collection_view_preform_refresh_before_on_remove"),this._performRefresh(),console.log("collection_view_preform_refresh_after_on_remove"),this._trackChanges,this.refresh(),this.currentItem!==n&&this.onCurrentChanged()}console.log("collection_view_remove_finished")},Object.defineProperty(e.prototype,"sourceCollection",{get:function(){return this._src},set:function(e){if(e!=this._src){var t=this.currentPosition;this._src=function n(e,t){return void 0===t&&(t=!0),u(t&&null==e||a(e),"Array expected."),e}(e,!1),this.currentPosition<0&&-1<t&&this.onCurrentChanged()}},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){console.log("collection_view_refresh_started"),this._performRefresh(),this.onCollectionChanged(),console.log("collection_view_refresh_finished")},e.prototype._performRefresh=function(){console.log("preform_refresh_started"),console.log("preform_refresh_finished")},e.prototype.onCollectionChanged=function(){this.collectionChanged.emit()},e}();function b(e){return e&&e.items&&e.items.length}function y(e){return"string"==typeof e}function j(e,t){return void 0===t&&(t=!0),u(t&&null==e||y(e),"String expected."),e}function v(e,t,n){return void 0===n&&(n=!1),e=function o(e,t){return null==e?null:y(t)?l(e.implementsInterface)&&e.implementsInterface(t)?e:null:e instanceof t?e:null}(e,t),u(n||null!=e,t+" expected."),e}function w(e,t){if(e&&e.getAttribute){var n=new RegExp("\\b"+t+"\\b");return e&&n.test(e.getAttribute("class"))}return!1}function x(e,t){if(e&&e.setAttribute&&!w(e,t)){var n=e.getAttribute("class");e.setAttribute("class",n?n+" "+t:t)}}function F(e,t){for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1}function C(e,t,n){n?x(e,t):function r(e,t){if(e&&e.setAttribute&&w(e,t)){var n=new RegExp("\\s?\\b"+t+"\\b","g"),o=e.getAttribute("class");e.setAttribute("class",o.replace(n,""))}}(e,t)}function D(e){return e instanceof HTMLElement?e:y(e)?document.querySelector(e):e&&e.jquery?e[0]:null}var T={Globalize:{numberFormat:{NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencySymbol:"$",".":".",",":",",percent:{pattern:["-n %","n %"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},dateTimeFormat:{TimeSeparator:"/",DateSeparator:":","/":"/",":":":"},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}},MultiSelect:{itemsSelected:"{count:n0} items selected"},FlexGrid:{groupHeaderFormat:"{name}: <b>{value} </b>({count:n0} items)"},FlexGridFilter:{ascending:"↑ Ascending",descending:"↓ Descending",apply:"Apply",clear:"Clear",conditions:"Filter by Condition",values:"Filter by Value",search:"Search",selectAll:"Select All","null":"(nothing)",header:"Show items where the value",and:"And",or:"Or",stringOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1},{name:"Begins with",op:6},{name:"Ends with",op:7},{name:"Contains",op:8},{name:"Does not contain",op:9}],numberOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1},{name:"Is Greater than",op:2},{name:"Is Greater than or equal to",op:3},{name:"Is Less than",op:4},{name:"Is Less than or equal to",op:5}],dateOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Is Before",op:4},{name:"Is After",op:3}],booleanOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1}]}},O=function(){function o(){}return o.addDays=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},o.addMonths=function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,e.getDate())},o.addYears=function(e,t){return new Date(e.getFullYear()+t,e.getMonth(),e.getDate())},o.addHours=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t)},o.addMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+t)},o.addSeconds=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()+t)},o.sameDate=function(e,t){return c(e)&&c(t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},o.sameTime=function(e,t){return c(e)&&c(t)&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()&&e.getSeconds()==t.getSeconds()},o.equals=function(e,t){return c(e)&&c(t)&&e.getTime()==t.getTime()},o.fromDateTime=function(e,t){return e||t?(e||(e=t),t||(t=e),new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())):null},o.toFiscal=function(e,t){var n=T.Globalize.calendar;return a(n.fiscalYearOffsets)?o.addMonths(e,-n.fiscalYearOffsets[t?0:1]):e},o.fromFiscal=function(e,t){var n=T.Globalize.calendar;return a(n.fiscalYearOffsets)?o.addMonths(e,+n.fiscalYearOffsets[t?0:1]):e},o.clone=function(e){return o.fromDateTime(e,e)},o}(),M=function(){function I(){}return I.format=function(e,t,n,o){return t||(p(e)?t=e==Math.round(e)?"n0":"n2":c(e)&&(t="d")),p(e)?I.formatNumber(e,t,n,o):c(e)?I.formatDate(e,t):null!=e?e.toString():""},I.formatNumber=function(e,t,n,o){var r;_(e),j(t);var i=t?t.match(/([a-z])(\d*)(,*)(.*)/i):null,s=T.Globalize.numberFormat,a=i?i[1].toLowerCase():"n",c=i&&i[2]?parseInt(i[2]):"c"==a?s.currency.decimals:e==Math.round(e)?0:2,l=i&&i[3]?3*i[3].length:0,u=i&&i[4]?i[4]:s.currency.symbol,p=s["."],d=s[","];if(l&&(e/=Math.pow(10,l)),"d"==a||"x"==a){for(r=Math.round(Math.abs(e)).toString("d"==a?10:16);r.length<c;)r="0"+r;return e<0&&(r="-"+r),t&&"X"==t[0]&&(r=r.toUpperCase()),r}if("p"==a&&(e*=100),o&&(e=function g(e,t,n){if(n){var o=(r=e.toString()).indexOf(".");-1<o&&(r=r.substr(0,o+1+t),e=parseFloat(r))}else{var r=e.toFixed(t);e=parseFloat(r)}return e}(e,c,!0)),r="c"==a||"p"==a?Math.abs(e).toFixed(c):e.toFixed(c),(n||"g"==a)&&-1<r.indexOf(".")&&(r=(r=r.replace(/(\.[0-9]*?)0+$/g,"$1")).replace(/\.$/,"")),"."!=p&&(r=r.replace(".",p)),d&&("n"==a||"c"==a||"p"==a)){var h=r.indexOf(p),f=/\B(?=(\d\d\d)+(?!\d))/g;r=-1<h?r.substr(0,h).replace(f,d)+r.substr(h):r.replace(f,d)}"c"==a&&(r=s.currency.pattern[e<0?0:1].replace("n",r).replace("$",u));"p"==a&&(r=s.percent.pattern[e<0?0:1].replace("n",r));return r},I.formatDate=function(e,t){switch(e=function i(e,t){return void 0===t&&(t=!1),u(t&&null==e||c(e),"Date expected."),e}(e),t){case"r":case"R":return e.toUTCString();case"u":return e.toISOString().replace(/\.\d{3}/,"")}t=I._expandFormat(t);for(var n=I._parseDateFormat(t),o="",r=0;r<n.length;r++)o+=I._formatDatePart(e,t,n[r]);return o},I.parseInt=function(e,t){return Math.round(I.parseFloat(e,t))},I.parseFloat=function(e,t){var n=-1<e.indexOf("-")||-1<e.indexOf("(")&&-1<e.indexOf(")")?-1:1,o=-1<e.indexOf("%")?.01:1,r=t?t.match(/,+/):null,i=r?3*r[0].length:0;if(t&&("x"==t[0]||"X"==t[0]))return e=e.replace(/[^0-9a-f]+.*$/gi,""),parseInt(e,16)*n*o*Math.pow(10,i);var s=T.Globalize.numberFormat["."],a=new RegExp("[^\\d\\"+s+"]","g");e=e.replace(a,"").replace(s,".");return parseFloat(e)*n*o*Math.pow(10,i)},I.parseDate=function(e,t){if(!(e=j(e)))return null;if("u"==t)return new Date(e);if("R"==t||"r"==t){var n=e.match(/(([0-9]+)\-([0-9]+)\-([0-9]+))?\s?(([0-9]+):([0-9]+)(:([0-9]+))?)?/);if(n[1]||n[5]){var o=n[1]?new Date(parseInt(n[2]),parseInt(n[3])-1,parseInt(n[4])):new Date;n[5]&&(o.setHours(parseInt(n[6])),o.setMinutes(parseInt(n[7])),o.setSeconds(n[8]?parseInt(n[9]):0))}else o=new Date(e);return isNaN(o.getTime())?null:o}t=I._expandFormat(t||"d");var r,i,s,a,c,l=T.Globalize.calendar,u=I._CJK,p=new RegExp("(\\"+l["/"]+")|(\\"+l[":"]+")|(\\d+)|(["+u+"\\.]{2,})|(["+u+"]+)","gi"),d=e.match(p),h=I._parseDateFormat(t),f=0,g=-1,_=0,m=1,b=0,y=0,v=0,w=0,x=-1;if(!(d&&d.length&&h&&h.length))return null;for(var F=0;F<h.length&&d;F++){var C=F-f,D=-1<C&&C<d.length?d[C]:"",M=h[F].length;switch(h[F]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":c=h[F];case"yyyy":case"yyy":case"yy":case"y":1<M&&D.length>M&&(d[C]=D.substr(M),D=D.substr(0,M),f++),g=parseInt(D);break;case"MMMM":case"MMM":a=!0;var E=D.toLowerCase();_=-1;for(var P=0;P<12;P++)if(0==l.months[P].toLowerCase().indexOf(E)){_=P;break}break;case"MM":case"M":1<M&&D.length>M&&(d[C]=D.substr(M),D=D.substr(0,M),f++),_=parseInt(D)-1,a=!0;break;case"dddd":case"ddd":r=!0;break;case"dd":case"d":1<M&&D.length>M&&(d[C]=D.substr(M),D=D.substr(0,M),f++),m=parseInt(D),i=!0;break;case"hh":case"h":1<M&&D.length>M&&(d[C]=D.substr(M),D=D.substr(0,M),f++),b=12==(b=parseInt(D))?0:b;break;case"HH":1<M&&D.length>M&&(d[C]=D.substr(M),D=D.substr(0,M),f++),b=parseInt(D);break;case"H":b=parseInt(D);break;case"mm":case"m":1<M&&D.length>M&&(d[C]=D.substr(M),D=D.substr(0,M),f++),y=parseInt(D);break;case"ss":case"s":1<M&&D.length>M&&(d[C]=D.substr(M),D=D.substr(0,M),f++),v=parseInt(D);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":w=parseInt(D)/Math.pow(10,M-3);break;case"tt":case"t":D=D.toUpperCase(),(l.pm[0]&&D==l.pm[0]&&b<12||l.pm[1]&&D==l.pm[1]&&b<12)&&(b+=12);break;case"q":case"Q":case"u":case"U":s=!0;break;case"ggg":case"gg":case"g":x=1<l.eras.length?I._getEra(D,l):-1;break;case l["/"]:case l[":"]:if(D&&D!=h[F])return null;break;case"K":break;default:I._unquote(h[F])!=D&&f++}}if(a&&i&&(isNaN(b)&&(b=0),isNaN(y)&&(y=0),isNaN(v)&&(v=0)),_<0||11<_||isNaN(_)||m<0||31<m||isNaN(m)||b<0||24<b||isNaN(b)||y<0||60<y||isNaN(y)||v<0||60<v||isNaN(v))return null;if(c){if(!a)return null;o=new Date(g,_),g=(o=O.fromFiscal(o,"E"==c[0])).getFullYear(),_=o.getMonth()}return r&&!i?null:s&&!a?null:(g<0&&(g=(new Date).getFullYear()),-1<x?g=g+l.eras[x].start.getFullYear()-1:g<100&&(g+=30<=g?1900:2e3),o=new Date(g,_,m,b,y+0,v,w),isNaN(o.getTime())?null:o)},I.getFirstDayOfWeek=function(){var e=T.Globalize.calendar.firstDay;return e||0},I.getNumberDecimalSeparator=function(){var e=T.Globalize.numberFormat["."];return e||"."},I._unquote=function(e){return 1<e.length&&e[0]==e[e.length-1]&&("'"==e[0]||'"'==e[0])?e.substr(1,e.length-2):e},I._parseDateFormat=function(e){if(e in I._dateFomatParts)return I._dateFomatParts[e];var t,n,o=[];for(t=0;-1<t&&t<e.length;t++){var r=e[t];if(("'"==r||'"'==r)&&-1<(n=e.indexOf(r,t+1)))o.push(e.substring(t,n+1)),t=n;else{for(n=t+1;n<e.length&&e[n]==r;n++);o.push(e.substring(t,n)),t=n-1}}return I._dateFomatParts[e]=o},I._formatDatePart=function(e,t,n){var o,r=T.Globalize.calendar,i=0,s=0,a=0,c=n.length;switch(n){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":return s=(o="E"==n[0]?O.toFiscal(e,!0):"e"==n[0]?O.toFiscal(e,!1):e).getFullYear(),1<r.eras.length&&-1<t.indexOf("g")&&-1<(i=I._getEra(e,r))&&(s=s-r.eras[i].start.getFullYear()+1),I._zeroPad(s,4).substr(4-n.length);case"MMMM":return r.months[e.getMonth()];case"MMM":return r.monthsAbbr[e.getMonth()];case"MM":case"M":return I._zeroPad(e.getMonth()+1,c);case"dddd":return r.days[e.getDay()];case"ddd":return r.daysAbbr[e.getDay()];case"dd":return I._zeroPad(e.getDate(),2);case"d":return e.getDate().toString();case"hh":case"h":return I._zeroPad(I._h12(e),c);case"HH":case"H":return I._zeroPad(e.getHours(),c);case"mm":case"m":return I._zeroPad(e.getMinutes(),c);case"ss":case"s":return I._zeroPad(e.getSeconds(),c);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":return a=e.getMilliseconds()*Math.pow(10,c-3),"f"==n[0]?I._zeroPad(a,c):a.toFixed(0);case"tt":return e.getHours()<12?r.am[0]:r.pm[0];case"t":return e.getHours()<12?r.am[1]:r.pm[1];case"q":case"Q":return(Math.floor(e.getMonth()/3)+1).toString();case"u":case"U":return o=O.toFiscal(e,"U"==n),(Math.floor(o.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":return 1<r.eras.length&&-1<(i=I._getEra(e,r))?"ggg"==n?r.eras[i].name:"gg"==n?r.eras[i].name[0]:r.eras[i].symbol:r.eras[0];case":":case"/":return r[n];case"K":var l=e.toString().match(/(\+|\-)(\d{2})(\d{2})/);return l?l[1]+l[2]+l[3]:""}return 1<c&&n[0]==n[c-1]&&('"'==n[0]||"'"==n[0])?n.substr(1,c-2):n},I._getEra=function(e,t){if(c(e)){for(var n=0;n<t.eras.length;n++)if(e>=t.eras[n].start)return n}else if(y(e))for(n=0;n<t.eras.length;n++)if(t.eras[n].name&&(0==t.eras[n].name.indexOf(e)||0==t.eras[n].symbol.indexOf(e)))return n;return-1},I._expandFormat=function(e){var t=T.Globalize.calendar.patterns[e];return t||e},I._zeroPad=function(e,t){var n=e.toFixed(0),o=t-n.length+1;return 0<o?Array(o).join("0")+n:n},I._h12=function(e){var t=T.Globalize.calendar,n=e.getHours();return t.am&&t.am[0]&&0==(n%=12)&&(n=12),n},I}();M._CJK="a-zu00C0-u017Fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u"),M._dateFomatParts={};var E=function N(e,t){this.handler=e,this.self=t},P=function(){function e(){this._handlers=[]}return e.prototype.addHandler=function(e,t){d(e),this._handlers.push(new E(e,t))},e.prototype.removeHandler=function(e,t){d(e);for(var n=0;n<this._handlers.length;n++){var o=this._handlers[n];if((o.handler==e||null==e)&&(o.self==t||null==t)&&(this._handlers.splice(n,1),e&&t))break}},e.prototype.removeAllHandlers=function(){this._handlers.length=0},e.prototype.raise=function(e,t){void 0===t&&(t=f.empty);for(var n=0;n<this._handlers.length;n++){var o=this._handlers[n];o.handler.call(o.self,e,t)}},Object.defineProperty(e.prototype,"hasHandlers",{get:function(){return 0<this._handlers.length},enumerable:!0,configurable:!0}),e}(),I=function(){function i(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this._focus=!1,this._updating=0,this._fullUpdate=!1,this.gotFocus=new P,this.lostFocus=new P;var o=D(e),r=((this._e=o)[i._DATA_KEY]=this)._handleDisabled.bind(this);this.addEventListener(o,"click",r,!0)}return i.prototype._handleDisabled=function(e){this.disabled&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())},Object.defineProperty(i.prototype,"disabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(e){(e=h(e,!0))!=this.disabled&&function n(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","true"),C(e,"wj-state-disabled",!t)}(this._e,!e)},enumerable:!0,configurable:!0}),i.prototype.addEventListener=function(e,t,n,o){void 0===o&&(o=!1),e&&(e.addEventListener(t,n,o),null==this._listeners&&(this._listeners=[]),this._listeners.push({target:e,type:t,fn:n,capture:o}))},i.prototype.applyTemplate=function(e,t,n,o){var r=this._e;e&&x(r,e);var i=null;if(t&&(i=function l(e){var t=document.createElement("div");return t.innerHTML=e,t.removeChild(t.firstChild)}(t),i=r.appendChild(i)),r&&!r.getAttribute("tabindex")&&(r.tabIndex=r.querySelector("input")?-1:0),n)for(var s in n){var a=n[s];if(this[s]=i.querySelector('[wj-part="'+a+'"]'),null==this[s]&&i.getAttribute("wj-part")==a&&(this[s]=i),null==this[s])throw'Missing template part: "'+a+'"';if(a==o){var c=r.attributes.name;c&&c.value&&this[s].setAttribute("name",c.value),(c=r.attributes.accesskey)&&c.value&&(this[s].setAttribute("accesskey",c.value),r.removeAttribute("accesskey"))}}return i},i.prototype.getTemplate=function(){return null},i.getControl=function(e){var t=D(e);return t?v(t[i._DATA_KEY],i,!0):null},i.prototype.initialize=function(e){e&&function i(e,t){for(var n in t){u(n in e,'Unknown key "'+n+'".');var o=t[n];e._copy&&e._copy(n,o)||(e[n]instanceof Event&&l(o)?e[n].addHandler(o):null==(r=o)||"object"!=typeof r||c(r)||a(r)||!e[n]?e[n]=o:i(e[n],o))}var r}(this,e)},Object.defineProperty(i.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isTouching",{get:function(){return i._touching},enumerable:!0,configurable:!0}),i.prototype._updateFocusState=function(){var o=this;setTimeout(function(){var e=o.containsFocus();if(e!=o._focus&&((o._focus=e)?o.onGotFocus():o.onLostFocus(),C(o._e,"wj-state-focused",e)),o._e)for(var t=o._e.parentElement;t;t=t.parentElement){var n=i.getControl(t);if(n){n._updateFocusState();break}}})},i.prototype.containsFocus=function(){if(!this._e)return!1;for(var e=this._e.getElementsByClassName("wj-control"),t=0;t<e.length;t++){var n=i.getControl(e[t]);if(n&&n!=this&&n.containsFocus())return!0}return F(this._e,document.activeElement)},i.prototype.onGotFocus=function(e){this.gotFocus.raise(this,e)},i.prototype.onLostFocus=function(e){this.lostFocus.raise(this,e)},i}();I._DATA_KEY="wj-Control",I._REFRESH_INTERVAL=10;var S=function(o){function e(e,t){var n=o.call(this,e,!0)||this;n._showBtn=!0,n._autoExpand=!0,n.isDroppedDownChanged=new P,n.isDroppedDownChanging=new P,n.textChanged=new P;return n.applyTemplate("wj-control wj-dropdown wj-content",'<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>',{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input"),n._elRef=n._tbx,n._tbx.autocomplete="off",n._createDropDown(),n._updateBtn(),n.addEventListener(n._dropDown,"blur",function(){n._updateFocusState()},!0),n.addEventListener(n._tbx,"input",function(){n._setText(n.text,!1)}),n.addEventListener(n._tbx,"click",function(){n._autoExpand&&n._expandSelection()}),n.addEventListener(n.dropDown,"focus",function(){n._updateFocusState()}),n.addEventListener(n._btn,"click",n._btnclick.bind(n)),n.addEventListener(n._dropDown,"click",function(e){e.stopPropagation()}),n}return i(e,o),e.prototype._createDropDown=function(){},Object.defineProperty(e.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),e.prototype._updateBtn=function(){this._btn.tabIndex=-1,this._btn.style.display=this._showBtn?"":"none"},e.prototype._getCharType=function(e,t){var n=e[t];return"0"<=n&&n<="9"?0:"a"<=n&&n<="z"||"A"<=n&&n<="Z"?1:-1},e.prototype._expandSelection=function(){var e=this._tbx,t=e.value,n=e.selectionStart,o=e.selectionEnd;if(t&&n==o){var r=this._getCharType(t,n);if(-1<r){for(;o<t.length&&this._getCharType(t,o)==r;o++);for(;0<n&&this._getCharType(t,n-1)==r;n--);n!=o&&e.setSelectionRange(n,o)}}},e.prototype._btnclick=function(e){this.isDroppedDown=!this.isDroppedDown},Object.defineProperty(e.prototype,"isDroppedDown",{get:function(){return"none"!=this._dropDown.style.display},set:function(e){if((e=h(e)&&!this.disabled)!=this.isDroppedDown&&this.onIsDroppedDownChanging(new g)){var t=this._dropDown;e?(t.style.minWidth||(t.style.minWidth=this.hostElement.getBoundingClientRect().width+"px"),t.style.display="block",this._updateDropDown()):(this.containsFocus()&&(this.isTouching&&this.showDropDownButton||this.selectAll()),t.style.display="none"),this._updateFocusState(),this.onIsDroppedDownChanged()}},enumerable:!0,configurable:!0}),e.prototype.onIsDroppedDownChanged=function(e){this.isDroppedDownChanged.raise(this,e)},e.prototype._updateDropDown=function(){this.isDroppedDown},Object.defineProperty(e.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(e){this._showBtn=h(e),this._updateBtn()},enumerable:!0,configurable:!0}),e.prototype.containsFocus=function(){return o.prototype.containsFocus.call(this)||F(this._dropDown,document.activeElement)},e.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDownChanging.raise(this,e),!e.cancel},e.prototype.onLostFocus=function(e){this._commitText(),this.containsFocus()||(this.isDroppedDown=!1),o.prototype.onLostFocus.call(this,e)},e.prototype._commitText=function(){},e.prototype.onGotFocus=function(e){this.isTouching||this.selectAll(),o.prototype.onGotFocus.call(this,e)},e.prototype.selectAll=function(){this._elRef==this._tbx&&function r(e,t,n){if(void 0===n&&(n=t),e=v(e,HTMLInputElement),F(document.body,e)&&!e.disabled&&"none"!=e.style.display)try{e.setSelectionRange(_(t),_(n)),e.focus()}catch(o){}}(this._tbx,0,this.text.length)},Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&this._setText(e,!0)},enumerable:!0,configurable:!0}),e.prototype._setText=function(e,t){null==e&&(e=""),(e=e.toString())!=this._tbx.value&&(this._tbx.value=e),e!=this._oldText&&(this._oldText=e,this.onTextChanged())},e.prototype.onTextChanged=function(e){this.textChanged.raise(this,e)},e}(I);S.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>';var A=function(r){function e(e,t){var n=r.call(this,e)||this;n._html=!1,n._search="",n.itemsChanged=new P,n.selectedIndexChanged=new P,n.applyTemplate("wj-control wj-listbox wj-content",null,null),n._orgTag;var o=n.hostElement;return n.addEventListener(o,"click",n._click.bind(n)),n}return i(e,r),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._html},set:function(e){e!=this._html&&(this._html=h(e),this._populateList())},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(e){var t=this.hostElement.children,n=-1<e&&e<t.length?t[e]:null;return null!=n?n.textContent:""},e.prototype._click=function(e){console.log("click on list box");for(var t=this.hostElement.children,n=0;n<t.length;n++)if(F(t[n],e.target)){this.selectedIndex=n,this._cv.removeAt(n);break}},e.prototype.refresh=function(){console.log("list_box_refresh_csalled")},Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return console.log("list_box_get_selected_index"),console.log("list_box_cv_current_position:"+this._cv.currentPosition),this._cv?this._cv.currentPosition:-1},set:function(e){this._cv&&this._cv.moveCurrentToPosition(_(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(e){this._items!=e&&(this._items=e,this._cv=function n(e,t){return void 0===t&&(t=!0),null==e&&t?null:new m(e)}(e),null!=this._cv&&(this._cv.currentChanged.subscribe(this._cvCurrentChanged.bind(this)),this._cv.collectionChanged.subscribe(this._cvCollectionChanged.bind(this))),this._populateList())},enumerable:!0,configurable:!0}),e.prototype._cvCollectionChanged=function(){console.log("list_box_cv_collection_view_changed_started"),this._populateList(),this.onItemsChanged(),console.log("list_box_cv_collection_view_changed_finished")},e.prototype._cvCurrentChanged=function(e,t){console.log("list_box_current_changed"),this.showSelection(),this.onSelectedIndexChanged()},e.prototype.onItemsChanged=function(e){this.itemsChanged.raise(this,e)},Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(e){this._cv&&this._cv.moveCurrentTo(e)},enumerable:!0,configurable:!0}),e.prototype._populateList=function(){console.log("populate_list_start");var e=this.hostElement;if(e){this.containsFocus();if(e.innerHTML="",this._cv)for(var t=0;t<this._cv.items.length;t++){var n=this.getDisplayValue(t);this._html;var o=document.createElement("div");o.innerHTML=n,o.className="wj-listbox-item",w(o.firstChild,"wj-separator")&&(o.className+=" wj-separator"),e.appendChild(o)}0==e.children.length&&e.appendChild(document.createElement("div")),this.showSelection()}console.log("populate_list_finish")},e.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},e.prototype.getDisplayValue=function(e){var t=null;return-1<e&&b(this._cv)&&(t=this._cv.items[e],this.displayMemberPath&&(t=t[this.displayMemberPath])),null!=t?t.toString():""},Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._pathDisplay},set:function(e){e!=this._pathDisplay&&(this._pathDisplay=j(e),this._populateList())},enumerable:!0,configurable:!0}),e.prototype.showSelection=function(){console.log("list_box_show_selection_started");var e,t=this.selectedIndex,n=this.hostElement,o=n.children;console.log("list_box_selected_index:"+t);for(var r=0;r<o.length;r++)C(e=o[r],"wj-state-selected",r==t);if(-1<t&&t<o.length){var i=(e=o[t]).getBoundingClientRect(),s=this.hostElement.getBoundingClientRect();i.bottom>s.bottom?n.scrollTop+=i.bottom-s.bottom:i.top<s.top&&(n.scrollTop-=s.top-i.top)}-1<t&&this.containsFocus()&&(e=o[t])instanceof HTMLElement&&!F(e,document.activeElement)&&e.focus(),console.log("list_box_show_selection_finished")},Object.defineProperty(e.prototype,"selectedValue",{get:function(){var e=this.selectedItem;return e&&this.selectedValuePath&&(e=e[this.selectedValuePath]),e},set:function(e){var t=this.selectedValuePath,n=-1;if(this._cv){for(var o=0;o<this._cv.items.length;o++){var r=this._cv.items[o];if(t&&r[t]==e||!t&&r==e){n=o;break}}this.selectedIndex=n}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._pathValue},set:function(e){this._pathValue=j(e)},enumerable:!0,configurable:!0}),e}(I),H=function(o){function e(e,t){var n=o.call(this,e)||this;return n._required=!0,n._editable=!1,n._composing=!1,n._deleting=!1,n._settingText=!1,n.selectedIndexChanged=new P,n.initialize(t),n}return i(e,o),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(e){this._lbx.displayMemberPath=e;var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),e.prototype._setText=function(e,t){this._composing||this._settingText||(this._settingText=!0,null==e&&(e=""),e=e.toString(),o.prototype._setText.call(this,e,t),this._settingText=!1)},Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource=e,this._updateBtn()},enumerable:!0,configurable:!0}),e.prototype._createDropDown=function(){var t=this;this._lbx=new A(this._dropDown),this._lbx.selectedIndexChanged.addHandler(function(){t._updateBtn(),t.selectedIndex=t._lbx.selectedIndex,t.onSelectedIndexChanged()}),this._lbx.itemsChanged.addHandler(function(){t._updateBtn()}),this.addEventListener(this._dropDown,"click",function(e){e.target!=t._dropDown&&(t.isDroppedDown=!1)})},Object.defineProperty(e.prototype,"headerPath",{get:function(){return this._hdrPath},set:function(e){this._hdrPath=j(e);var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),e.prototype.onSelectedIndexChanged=function(e){this._updateBtn(),this.selectedIndexChanged.raise(this,e)},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(e){e!=this.selectedIndex&&(this._lbx.selectedIndex=e);var t=this.getDisplayText(e);this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(e){if(void 0===e&&(e=this.selectedIndex),this.headerPath&&-1<e&&b(this.collectionView)){var t=this.collectionView.items[e][this.headerPath],n=null!=t?t.toString():"";return this.isContentHtml&&(this._cvt||(this._cvt=document.createElement("div")),this._cvt.innerHTML=n,n=this._cvt.textContent),n}return this._lbx.getDisplayText(e)},Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(e){if(e!=this.isContentHtml){this._lbx.isContentHtml=h(e);var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(e){this._lbx.selectedItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){return this._lbx.selectedValue},set:function(e){this._lbx.selectedValue=e},enumerable:!0,configurable:!0}),e}(S);e.DropDown=S,e.ComboBox=H,e.ClarityModule=s,e.ɵa=I,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ui-components-light.umd.min.js.map
