!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/common","@angular/forms","@angular/core"],t):t(e["ui-components-light"]={},e.ng.common,e.ng.forms,e.ng.core)}(this,function(e,t,n,r){"use strict";var o,s=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(){function e(){}return e.forChild=function(){return{ngModule:e,providers:[]}},e}();function a(e){return e instanceof Array}function c(e){return e instanceof Date&&!isNaN(e.valueOf())}function u(e){return"function"==typeof e}function l(e,t){if(!e)throw new Error("** Assertion failed in Wijmo: "+t)}function d(e){return"number"==typeof e}function p(e,t){return void 0===t&&(t=!0),l(t&&null==e||u(e),"Function expected."),e}function m(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),l(t&&null==e||d(e),"Number expected."),n&&e&&e<0)throw new Error("Positive number expected.");return e}function h(e,t){return void 0===t&&(t=!1),l(t&&null==e||function n(e){return"boolean"==typeof e}(e),"Boolean expected."),e}i.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,n.FormsModule],declarations:[],exports:[]}]}],i.ctorParameters=function(){return[]};var f=function H(){};f.empty=new f;var g=function(t){function e(){var e=t.apply(this,arguments)||this;return e.cancel=!1,e}return s(e,t),e}(f),b=function(){function e(e){this._idx=-1,this._newItem=null,this._edtItem=null,this._pgSz=0,this._pgIdx=0,this._updating=0,this._canFilter=!0,this._canGroup=!0,this._canSort=!0,this._canAddNew=!0,this._canCancelEdit=!0,this._canRemove=!0,this._canChangePage=!0,this._trackChanges=!1,this.currentChanged=new r.EventEmitter,this.currentChanging=new r.EventEmitter,this._pgView=e}return Object.defineProperty(e.prototype,"newItemCreator",{get:function(){return this._itemCreator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(e){this._srtCvt},enumerable:!0,configurable:!0}),e.prototype.implementsInterface=function(e){switch(e){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1},Object.defineProperty(e.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.moveCurrentTo=function(e){return this.moveCurrentToPosition(this._pgView.indexOf(e))},e.prototype.moveCurrentToFirst=function(){return this.moveCurrentToPosition(0)},e.prototype.moveCurrentToLast=function(){return this.moveCurrentToPosition(this._pgView.length-1)},e.prototype.moveCurrentToNext=function(){return this.moveCurrentToPosition(this._idx+1)},e.prototype.moveCurrentToPosition=function(e){if(-1<=e&&e<this._pgView.length){var t=new g;this._idx!=e&&this.onCurrentChanging(t)&&(this._edtItem&&(this._pgView[e],this._edtItem),this._newItem&&(this._pgView[e],this._newItem),this._idx=e,this.onCurrentChanged())}return this._idx==e},e.prototype.onCurrentChanged=function(e){void 0===e&&(e=f.empty),this.currentChanged.emit(e)},e.prototype.onCurrentChanging=function(e){return this.currentChanging.emit(e),!e.cancel},Object.defineProperty(e.prototype,"currentItem",{get:function(){return this._pgView&&-1<this._idx&&this._idx<this._pgView.length?this._pgView[this._idx]:null},set:function(e){this.moveCurrentTo(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPosition",{get:function(){return this._idx},enumerable:!0,configurable:!0}),e}();function _(e){return"string"==typeof e}function I(e,t){return void 0===t&&(t=!0),l(t&&null==e||_(e),"String expected."),e}function y(e,t,n){return void 0===n&&(n=!1),e=function r(e,t){return null==e?null:_(t)?u(e.implementsInterface)&&e.implementsInterface(t)?e:null:e instanceof t?e:null}(e,t),l(n||null!=e,t+" expected."),e}function v(e,t){if(e&&e.getAttribute){var n=new RegExp("\\b"+t+"\\b");return e&&n.test(e.getAttribute("class"))}return!1}function w(e,t){if(e&&e.setAttribute&&!v(e,t)){var n=e.getAttribute("class");e.setAttribute("class",n?n+" "+t:t)}}function x(e,t){for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1}function F(e,t,n){n?w(e,t):function o(e,t){if(e&&e.setAttribute&&v(e,t)){var n=new RegExp("\\s?\\b"+t+"\\b","g"),r=e.getAttribute("class");e.setAttribute("class",r.replace(n,""))}}(e,t)}function D(e){return e instanceof HTMLElement?e:_(e)?document.querySelector(e):e&&e.jquery?e[0]:null}var P={Globalize:{numberFormat:{NumberDecimalSeparator:".",NumberGroupSeparator:",",CurrencySymbol:"$",".":".",",":",",percent:{pattern:["-n %","n %"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},dateTimeFormat:{TimeSeparator:"/",DateSeparator:":","/":"/",":":":"},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}},MultiSelect:{itemsSelected:"{count:n0} items selected"},FlexGrid:{groupHeaderFormat:"{name}: <b>{value} </b>({count:n0} items)"},FlexGridFilter:{ascending:"↑ Ascending",descending:"↓ Descending",apply:"Apply",clear:"Clear",conditions:"Filter by Condition",values:"Filter by Value",search:"Search",selectAll:"Select All","null":"(nothing)",header:"Show items where the value",and:"And",or:"Or",stringOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1},{name:"Begins with",op:6},{name:"Ends with",op:7},{name:"Contains",op:8},{name:"Does not contain",op:9}],numberOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1},{name:"Is Greater than",op:2},{name:"Is Greater than or equal to",op:3},{name:"Is Less than",op:4},{name:"Is Less than or equal to",op:5}],dateOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Is Before",op:4},{name:"Is After",op:3}],booleanOperators:[{name:"(not set)",op:null},{name:"Equals",op:0},{name:"Does not equal",op:1}]}},S=function(){function r(){}return r.addDays=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},r.addMonths=function(e,t){return new Date(e.getFullYear(),e.getMonth()+t,e.getDate())},r.addYears=function(e,t){return new Date(e.getFullYear()+t,e.getMonth(),e.getDate())},r.addHours=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+t)},r.addMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+t)},r.addSeconds=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()+t)},r.sameDate=function(e,t){return c(e)&&c(t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},r.sameTime=function(e,t){return c(e)&&c(t)&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()&&e.getSeconds()==t.getSeconds()},r.equals=function(e,t){return c(e)&&c(t)&&e.getTime()==t.getTime()},r.fromDateTime=function(e,t){return e||t?(e||(e=t),t||(t=e),new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())):null},r.toFiscal=function(e,t){var n=P.Globalize.calendar;return a(n.fiscalYearOffsets)?r.addMonths(e,-n.fiscalYearOffsets[t?0:1]):e},r.fromFiscal=function(e,t){var n=P.Globalize.calendar;return a(n.fiscalYearOffsets)?r.addMonths(e,+n.fiscalYearOffsets[t?0:1]):e},r.clone=function(e){return r.fromDateTime(e,e)},r}(),M=function(){function j(){}return j.format=function(e,t,n,r){return t||(d(e)?t=e==Math.round(e)?"n0":"n2":c(e)&&(t="d")),d(e)?j.formatNumber(e,t,n,r):c(e)?j.formatDate(e,t):null!=e?e.toString():""},j.formatNumber=function(e,t,n,r){var o;m(e),I(t);var s=t?t.match(/([a-z])(\d*)(,*)(.*)/i):null,i=P.Globalize.numberFormat,a=s?s[1].toLowerCase():"n",c=s&&s[2]?parseInt(s[2]):"c"==a?i.currency.decimals:e==Math.round(e)?0:2,u=s&&s[3]?3*s[3].length:0,l=s&&s[4]?s[4]:i.currency.symbol,d=i["."],p=i[","];if(u&&(e/=Math.pow(10,u)),"d"==a||"x"==a){for(o=Math.round(Math.abs(e)).toString("d"==a?10:16);o.length<c;)o="0"+o;return e<0&&(o="-"+o),t&&"X"==t[0]&&(o=o.toUpperCase()),o}if("p"==a&&(e*=100),r&&(e=function g(e,t,n){if(n){var r=(o=e.toString()).indexOf(".");-1<r&&(o=o.substr(0,r+1+t),e=parseFloat(o))}else{var o=e.toFixed(t);e=parseFloat(o)}return e}(e,c,!0)),o="c"==a||"p"==a?Math.abs(e).toFixed(c):e.toFixed(c),(n||"g"==a)&&-1<o.indexOf(".")&&(o=(o=o.replace(/(\.[0-9]*?)0+$/g,"$1")).replace(/\.$/,"")),"."!=d&&(o=o.replace(".",d)),p&&("n"==a||"c"==a||"p"==a)){var h=o.indexOf(d),f=/\B(?=(\d\d\d)+(?!\d))/g;o=-1<h?o.substr(0,h).replace(f,p)+o.substr(h):o.replace(f,p)}"c"==a&&(o=i.currency.pattern[e<0?0:1].replace("n",o).replace("$",l));"p"==a&&(o=i.percent.pattern[e<0?0:1].replace("n",o));return o},j.formatDate=function(e,t){switch(e=function s(e,t){return void 0===t&&(t=!1),l(t&&null==e||c(e),"Date expected."),e}(e),t){case"r":case"R":return e.toUTCString();case"u":return e.toISOString().replace(/\.\d{3}/,"")}t=j._expandFormat(t);for(var n=j._parseDateFormat(t),r="",o=0;o<n.length;o++)r+=j._formatDatePart(e,t,n[o]);return r},j.parseInt=function(e,t){return Math.round(j.parseFloat(e,t))},j.parseFloat=function(e,t){var n=-1<e.indexOf("-")||-1<e.indexOf("(")&&-1<e.indexOf(")")?-1:1,r=-1<e.indexOf("%")?.01:1,o=t?t.match(/,+/):null,s=o?3*o[0].length:0;if(t&&("x"==t[0]||"X"==t[0]))return e=e.replace(/[^0-9a-f]+.*$/gi,""),parseInt(e,16)*n*r*Math.pow(10,s);var i=P.Globalize.numberFormat["."],a=new RegExp("[^\\d\\"+i+"]","g");e=e.replace(a,"").replace(i,".");return parseFloat(e)*n*r*Math.pow(10,s)},j.parseDate=function(e,t){if(!(e=I(e)))return null;if("u"==t)return new Date(e);if("R"==t||"r"==t){var n=e.match(/(([0-9]+)\-([0-9]+)\-([0-9]+))?\s?(([0-9]+):([0-9]+)(:([0-9]+))?)?/);if(n[1]||n[5]){var r=n[1]?new Date(parseInt(n[2]),parseInt(n[3])-1,parseInt(n[4])):new Date;n[5]&&(r.setHours(parseInt(n[6])),r.setMinutes(parseInt(n[7])),r.setSeconds(n[8]?parseInt(n[9]):0))}else r=new Date(e);return isNaN(r.getTime())?null:r}t=j._expandFormat(t||"d");var o,s,i,a,c,u=P.Globalize.calendar,l=j._CJK,d=new RegExp("(\\"+u["/"]+")|(\\"+u[":"]+")|(\\d+)|(["+l+"\\.]{2,})|(["+l+"]+)","gi"),p=e.match(d),h=j._parseDateFormat(t),f=0,g=-1,m=0,b=1,_=0,y=0,v=0,w=0,x=-1;if(!(p&&p.length&&h&&h.length))return null;for(var F=0;F<h.length&&p;F++){var D=F-f,M=-1<D&&D<p.length?p[D]:"",C=h[F].length;switch(h[F]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":c=h[F];case"yyyy":case"yyy":case"yy":case"y":1<C&&M.length>C&&(p[D]=M.substr(C),M=M.substr(0,C),f++),g=parseInt(M);break;case"MMMM":case"MMM":a=!0;var E=M.toLowerCase();m=-1;for(var T=0;T<12;T++)if(0==u.months[T].toLowerCase().indexOf(E)){m=T;break}break;case"MM":case"M":1<C&&M.length>C&&(p[D]=M.substr(C),M=M.substr(0,C),f++),m=parseInt(M)-1,a=!0;break;case"dddd":case"ddd":o=!0;break;case"dd":case"d":1<C&&M.length>C&&(p[D]=M.substr(C),M=M.substr(0,C),f++),b=parseInt(M),s=!0;break;case"hh":case"h":1<C&&M.length>C&&(p[D]=M.substr(C),M=M.substr(0,C),f++),_=12==(_=parseInt(M))?0:_;break;case"HH":1<C&&M.length>C&&(p[D]=M.substr(C),M=M.substr(0,C),f++),_=parseInt(M);break;case"H":_=parseInt(M);break;case"mm":case"m":1<C&&M.length>C&&(p[D]=M.substr(C),M=M.substr(0,C),f++),y=parseInt(M);break;case"ss":case"s":1<C&&M.length>C&&(p[D]=M.substr(C),M=M.substr(0,C),f++),v=parseInt(M);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":w=parseInt(M)/Math.pow(10,C-3);break;case"tt":case"t":M=M.toUpperCase(),(u.pm[0]&&M==u.pm[0]&&_<12||u.pm[1]&&M==u.pm[1]&&_<12)&&(_+=12);break;case"q":case"Q":case"u":case"U":i=!0;break;case"ggg":case"gg":case"g":x=1<u.eras.length?j._getEra(M,u):-1;break;case u["/"]:case u[":"]:if(M&&M!=h[F])return null;break;case"K":break;default:j._unquote(h[F])!=M&&f++}}if(a&&s&&(isNaN(_)&&(_=0),isNaN(y)&&(y=0),isNaN(v)&&(v=0)),m<0||11<m||isNaN(m)||b<0||31<b||isNaN(b)||_<0||24<_||isNaN(_)||y<0||60<y||isNaN(y)||v<0||60<v||isNaN(v))return null;if(c){if(!a)return null;r=new Date(g,m),g=(r=S.fromFiscal(r,"E"==c[0])).getFullYear(),m=r.getMonth()}return o&&!s?null:i&&!a?null:(g<0&&(g=(new Date).getFullYear()),-1<x?g=g+u.eras[x].start.getFullYear()-1:g<100&&(g+=30<=g?1900:2e3),r=new Date(g,m,b,_,y+0,v,w),isNaN(r.getTime())?null:r)},j.getFirstDayOfWeek=function(){var e=P.Globalize.calendar.firstDay;return e||0},j.getNumberDecimalSeparator=function(){var e=P.Globalize.numberFormat["."];return e||"."},j._unquote=function(e){return 1<e.length&&e[0]==e[e.length-1]&&("'"==e[0]||'"'==e[0])?e.substr(1,e.length-2):e},j._parseDateFormat=function(e){if(e in j._dateFomatParts)return j._dateFomatParts[e];var t,n,r=[];for(t=0;-1<t&&t<e.length;t++){var o=e[t];if(("'"==o||'"'==o)&&-1<(n=e.indexOf(o,t+1)))r.push(e.substring(t,n+1)),t=n;else{for(n=t+1;n<e.length&&e[n]==o;n++);r.push(e.substring(t,n)),t=n-1}}return j._dateFomatParts[e]=r},j._formatDatePart=function(e,t,n){var r,o=P.Globalize.calendar,s=0,i=0,a=0,c=n.length;switch(n){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":return i=(r="E"==n[0]?S.toFiscal(e,!0):"e"==n[0]?S.toFiscal(e,!1):e).getFullYear(),1<o.eras.length&&-1<t.indexOf("g")&&-1<(s=j._getEra(e,o))&&(i=i-o.eras[s].start.getFullYear()+1),j._zeroPad(i,4).substr(4-n.length);case"MMMM":return o.months[e.getMonth()];case"MMM":return o.monthsAbbr[e.getMonth()];case"MM":case"M":return j._zeroPad(e.getMonth()+1,c);case"dddd":return o.days[e.getDay()];case"ddd":return o.daysAbbr[e.getDay()];case"dd":return j._zeroPad(e.getDate(),2);case"d":return e.getDate().toString();case"hh":case"h":return j._zeroPad(j._h12(e),c);case"HH":case"H":return j._zeroPad(e.getHours(),c);case"mm":case"m":return j._zeroPad(e.getMinutes(),c);case"ss":case"s":return j._zeroPad(e.getSeconds(),c);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":return a=e.getMilliseconds()*Math.pow(10,c-3),"f"==n[0]?j._zeroPad(a,c):a.toFixed(0);case"tt":return e.getHours()<12?o.am[0]:o.pm[0];case"t":return e.getHours()<12?o.am[1]:o.pm[1];case"q":case"Q":return(Math.floor(e.getMonth()/3)+1).toString();case"u":case"U":return r=S.toFiscal(e,"U"==n),(Math.floor(r.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":return 1<o.eras.length&&-1<(s=j._getEra(e,o))?"ggg"==n?o.eras[s].name:"gg"==n?o.eras[s].name[0]:o.eras[s].symbol:o.eras[0];case":":case"/":return o[n];case"K":var u=e.toString().match(/(\+|\-)(\d{2})(\d{2})/);return u?u[1]+u[2]+u[3]:""}return 1<c&&n[0]==n[c-1]&&('"'==n[0]||"'"==n[0])?n.substr(1,c-2):n},j._getEra=function(e,t){if(c(e)){for(var n=0;n<t.eras.length;n++)if(e>=t.eras[n].start)return n}else if(_(e))for(n=0;n<t.eras.length;n++)if(t.eras[n].name&&(0==t.eras[n].name.indexOf(e)||0==t.eras[n].symbol.indexOf(e)))return n;return-1},j._expandFormat=function(e){var t=P.Globalize.calendar.patterns[e];return t||e},j._zeroPad=function(e,t){var n=e.toFixed(0),r=t-n.length+1;return 0<r?Array(r).join("0")+n:n},j._h12=function(e){var t=P.Globalize.calendar,n=e.getHours();return t.am&&t.am[0]&&0==(n%=12)&&(n=12),n},j}();M._CJK="a-zu00C0-u017Fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u"),M._dateFomatParts={};var C=function k(e,t){this.handler=e,this.self=t},E=function(){function e(){this._handlers=[]}return e.prototype.addHandler=function(e,t){p(e),this._handlers.push(new C(e,t))},e.prototype.removeHandler=function(e,t){p(e);for(var n=0;n<this._handlers.length;n++){var r=this._handlers[n];if((r.handler==e||null==e)&&(r.self==t||null==t)&&(this._handlers.splice(n,1),e&&t))break}},e.prototype.removeAllHandlers=function(){this._handlers.length=0},e.prototype.raise=function(e,t){void 0===t&&(t=f.empty);for(var n=0;n<this._handlers.length;n++){var r=this._handlers[n];r.handler.call(r.self,e,t)}},Object.defineProperty(e.prototype,"hasHandlers",{get:function(){return 0<this._handlers.length},enumerable:!0,configurable:!0}),e}(),T=function(){function s(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this._focus=!1,this._updating=0,this._fullUpdate=!1,this.gotFocus=new E,this.lostFocus=new E,console.log("control_constructor");var r=D(e),o=((this._e=r)[s._DATA_KEY]=this)._handleDisabled.bind(this);this.addEventListener(r,"click",o,!0)}return s.prototype._handleDisabled=function(e){this.disabled&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())},Object.defineProperty(s.prototype,"disabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(e){(e=h(e,!0))!=this.disabled&&function n(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","true"),F(e,"wj-state-disabled",!t)}(this._e,!e)},enumerable:!0,configurable:!0}),s.prototype.addEventListener=function(e,t,n,r){void 0===r&&(r=!1),e&&(e.addEventListener(t,n,r),null==this._listeners&&(this._listeners=[]),this._listeners.push({target:e,type:t,fn:n,capture:r}))},s.prototype.applyTemplate=function(e,t,n,r){console.log("apply_template_start");var o=this._e;e&&w(o,e);var s=null;if(t&&(s=function u(e){var t=document.createElement("div");return t.innerHTML=e,t.removeChild(t.firstChild)}(t),s=o.appendChild(s)),o&&!o.getAttribute("tabindex")&&(o.tabIndex=o.querySelector("input")?-1:0),n)for(var i in n){var a=n[i];if(this[i]=s.querySelector('[wj-part="'+a+'"]'),null==this[i]&&s.getAttribute("wj-part")==a&&(this[i]=s),null==this[i])throw'Missing template part: "'+a+'"';if(a==r){var c=o.attributes.name;c&&c.value&&this[i].setAttribute("name",c.value),(c=o.attributes.accesskey)&&c.value&&(this[i].setAttribute("accesskey",c.value),o.removeAttribute("accesskey"))}}return console.log("apply_template_finish"),s},s.prototype.getTemplate=function(){return null},s.getControl=function(e){var t=D(e);return t?y(t[s._DATA_KEY],s,!0):null},s.prototype.initialize=function(e){e&&function s(e,t){for(var n in t){l(n in e,'Unknown key "'+n+'".');var r=t[n];e._copy&&e._copy(n,r)||(e[n]instanceof Event&&u(r)?e[n].addHandler(r):null==(o=r)||"object"!=typeof o||c(o)||a(o)||!e[n]?e[n]=r:s(e[n],r))}var o}(this,e)},Object.defineProperty(s.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isTouching",{get:function(){return s._touching},enumerable:!0,configurable:!0}),s.prototype._updateFocusState=function(){var r=this;setTimeout(function(){var e=r.containsFocus();if(e!=r._focus&&((r._focus=e)?r.onGotFocus():r.onLostFocus(),F(r._e,"wj-state-focused",e)),r._e)for(var t=r._e.parentElement;t;t=t.parentElement){var n=s.getControl(t);if(n){n._updateFocusState();break}}})},s.prototype.containsFocus=function(){if(!this._e)return!1;for(var e=this._e.getElementsByClassName("wj-control"),t=0;t<e.length;t++){var n=s.getControl(e[t]);if(n&&n!=this&&n.containsFocus())return!0}return x(this._e,document.activeElement)},s.prototype.onGotFocus=function(e){this.gotFocus.raise(this,e)},s.prototype.onLostFocus=function(e){this.lostFocus.raise(this,e)},s}();T._DATA_KEY="wj-Control",T._REFRESH_INTERVAL=10;var j=function(r){function e(e,t){var n=r.call(this,e,!0)||this;n._showBtn=!0,n._autoExpand=!0,n.isDroppedDownChanged=new E,n.isDroppedDownChanging=new E,n.textChanged=new E,console.log("drop_down_constructor_start");return n.applyTemplate("wj-control wj-dropdown wj-content",'<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>',{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input"),n._elRef=n._tbx,n._tbx.autocomplete="off",n._createDropDown(),n._updateBtn(),n.addEventListener(n._dropDown,"blur",function(){n._updateFocusState()},!0),n.addEventListener(n._tbx,"input",function(){n._setText(n.text,!1)}),n.addEventListener(n._tbx,"click",function(){n._autoExpand&&n._expandSelection()}),n.addEventListener(n.dropDown,"focus",function(){n._updateFocusState()}),n.addEventListener(n._btn,"click",n._btnclick.bind(n)),n.addEventListener(n._dropDown,"click",function(e){e.stopPropagation()}),console.log("drop_down_constructor_finish"),n}return s(e,r),e.prototype._createDropDown=function(){},Object.defineProperty(e.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),e.prototype._updateBtn=function(){this._btn.tabIndex=-1,this._btn.style.display=this._showBtn?"":"none"},e.prototype._getCharType=function(e,t){var n=e[t];return"0"<=n&&n<="9"?0:"a"<=n&&n<="z"||"A"<=n&&n<="Z"?1:-1},e.prototype._expandSelection=function(){var e=this._tbx,t=e.value,n=e.selectionStart,r=e.selectionEnd;if(t&&n==r){var o=this._getCharType(t,n);if(-1<o){for(;r<t.length&&this._getCharType(t,r)==o;r++);for(;0<n&&this._getCharType(t,n-1)==o;n--);n!=r&&e.setSelectionRange(n,r)}}},e.prototype._btnclick=function(e){this.isDroppedDown=!this.isDroppedDown},Object.defineProperty(e.prototype,"isDroppedDown",{get:function(){return"none"!=this._dropDown.style.display},set:function(e){if((e=h(e)&&!this.disabled)!=this.isDroppedDown&&this.onIsDroppedDownChanging(new g)){var t=this._dropDown;e?(t.style.minWidth||(t.style.minWidth=this.hostElement.getBoundingClientRect().width+"px"),t.style.display="block",this._updateDropDown()):(this.containsFocus()&&(this.isTouching&&this.showDropDownButton||(this.selectAll(),console.log("select_all"))),t.style.display="none"),this._updateFocusState(),this.onIsDroppedDownChanged()}},enumerable:!0,configurable:!0}),e.prototype.onIsDroppedDownChanged=function(e){this.isDroppedDownChanged.raise(this,e)},e.prototype._updateDropDown=function(){this.isDroppedDown&&console.log("update_drop_down")},Object.defineProperty(e.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(e){this._showBtn=h(e),this._updateBtn()},enumerable:!0,configurable:!0}),e.prototype.containsFocus=function(){return r.prototype.containsFocus.call(this)||x(this._dropDown,document.activeElement)},e.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDownChanging.raise(this,e),console.log("changing"),!e.cancel},e.prototype.onLostFocus=function(e){this._commitText(),this.containsFocus()||(this.isDroppedDown=!1),console.log("on_lost_focus"),r.prototype.onLostFocus.call(this,e)},e.prototype._commitText=function(){},e.prototype.onGotFocus=function(e){this.isTouching||this.selectAll(),console.log("on_got_focus"),r.prototype.onGotFocus.call(this,e)},e.prototype.selectAll=function(){this._elRef==this._tbx&&function o(e,t,n){if(void 0===n&&(n=t),e=y(e,HTMLInputElement),x(document.body,e)&&!e.disabled&&"none"!=e.style.display)try{e.setSelectionRange(m(t),m(n)),e.focus()}catch(r){}}(this._tbx,0,this.text.length)},Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(e){e!=this.text&&this._setText(e,!0)},enumerable:!0,configurable:!0}),e.prototype._setText=function(e,t){null==e&&(e=""),(e=e.toString())!=this._tbx.value&&(this._tbx.value=e),e!=this._oldText&&(this._oldText=e,this.onTextChanged())},e.prototype.onTextChanged=function(e){this.textChanged.raise(this,e)},e}(T);j.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>';var O=function(o){function e(e,t){var n=o.call(this,e)||this;n._html=!1,n._search="",n.itemsChanged=new E,n.selectedIndexChanged=new E,n.applyTemplate("wj-control wj-listbox wj-content",null,null),n._orgTag;var r=n.hostElement;return n.addEventListener(r,"click",n._click.bind(n)),n}return s(e,o),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._html},set:function(e){e!=this._html&&(this._html=h(e),this._populateList())},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(e){var t=this.hostElement.children,n=-1<e&&e<t.length?t[e]:null;return null!=n?n.textContent:""},e.prototype._click=function(e){console.log("click on list box");for(var t=this.hostElement.children,n=0;n<t.length;n++)if(x(t[n],e.target)){this.selectedIndex=n,console.log("list_box_selected_index_set:"+this.selectedIndex);break}},e.prototype.refresh=function(){},Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._cv?this._cv.currentPosition:-1},set:function(e){this._cv&&this._cv.moveCurrentToPosition(m(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(e){this._items!=e&&(this._items=e,this._cv=function n(e,t){return void 0===t&&(t=!0),null==e&&t?null:new b(e)}(e),null!=this._cv&&this._cv.currentChanged.subscribe(this._cvCurrentChanged.bind(this)),this._populateList())},enumerable:!0,configurable:!0}),e.prototype._cvCurrentChanged=function(e,t){this.showSelection(),this.onSelectedIndexChanged()},e.prototype.onItemsChanged=function(e){this.itemsChanged.raise(this,e)},Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(e){this._cv&&this._cv.moveCurrentTo(e)},enumerable:!0,configurable:!0}),e.prototype._populateList=function(){var e=this.hostElement;if(e){if(e.innerHTML="",this._cv)for(var t=0;t<this._cv.items.length;t++){var n=this._cv.items[t].name;this._html;var r=document.createElement("div");r.innerHTML=n,r.className="wj-listbox-item",v(r.firstChild,"wj-separator")&&(r.className+=" wj-separator"),e.appendChild(r)}0==e.children.length&&e.appendChild(document.createElement("div")),this.showSelection()}},e.prototype.onSelectedIndexChanged=function(e){this.selectedIndexChanged.raise(this,e)},e.prototype.showSelection=function(){console.log("show selection _started");for(var e,t=this.selectedIndex,n=this.hostElement,r=n.children,o=0;o<r.length;o++)F(e=r[o],"wj-state-selected",o==t);if(-1<t&&t<r.length){var s=(e=r[t]).getBoundingClientRect(),i=this.hostElement.getBoundingClientRect();s.bottom>i.bottom?n.scrollTop+=s.bottom-i.bottom:s.top<i.top&&(n.scrollTop-=i.top-s.top)}-1<t&&this.containsFocus()&&(e=r[t])instanceof HTMLElement&&!x(e,document.activeElement)&&e.focus(),console.log("show selection _finished")},Object.defineProperty(e.prototype,"selectedValue",{get:function(){var e=this.selectedItem;return e&&this.selectedValuePath&&(e=e[this.selectedValuePath]),e},set:function(e){var t=this.selectedValuePath,n=-1;if(this._cv){for(var r=0;r<this._cv.items.length;r++){var o=this._cv.items[r];if(t&&o[t]==e||!t&&o==e){n=r;break}}this.selectedIndex=n}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._pathValue},set:function(e){this._pathValue=I(e)},enumerable:!0,configurable:!0}),e}(T),A=function(r){function e(e,t){var n=r.call(this,e)||this;return n._required=!0,n._editable=!1,n._composing=!1,n._deleting=!1,n._settingText=!1,n.selectedIndexChanged=new E,console.log("combo_constructor_start"),n.initialize(t),console.log("combo_constructor_finish"),n}return s(e,r),e.prototype._setText=function(e,t){console.log("combo_box_set_text_start"),this._composing||this._settingText||(this._settingText=!0,null==e&&(e=""),e=e.toString(),r.prototype._setText.call(this,e,t),console.log("combo_box_set_text_finish"),this._settingText=!1)},Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(e){this._lbx.itemsSource=e,this._updateBtn()},enumerable:!0,configurable:!0}),e.prototype._createDropDown=function(){var t=this;console.log("create drop down"),this._lbx=new O(this._dropDown),this._lbx.selectedIndexChanged.addHandler(function(){t._updateBtn(),t.selectedIndex=t._lbx.selectedIndex,t.onSelectedIndexChanged()}),this._lbx.itemsChanged.addHandler(function(){t._updateBtn()}),this.addEventListener(this._dropDown,"click",function(e){e.target!=t._dropDown&&(t.isDroppedDown=!1)})},Object.defineProperty(e.prototype,"headerPath",{get:function(){return this._hdrPath},set:function(e){this._hdrPath=I(e);var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),e.prototype.onSelectedIndexChanged=function(e){this._updateBtn(),this.selectedIndexChanged.raise(this,e)},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(e){e!=this.selectedIndex&&(this._lbx.selectedIndex=e);var t=this.getDisplayText(e);this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(e){if(void 0===e&&(e=this.selectedIndex),this.headerPath&&-1<e&&function r(e){return e&&e.items&&e.items.length}(this.collectionView)){var t=this.collectionView.items[e][this.headerPath],n=null!=t?t.toString():"";return this.isContentHtml&&(this._cvt||(this._cvt=document.createElement("div")),this._cvt.innerHTML=n,n=this._cvt.textContent),n}return this._lbx.getDisplayText(e)},Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(e){if(e!=this.isContentHtml){this._lbx.isContentHtml=h(e);var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(e){this._lbx.selectedItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){return this._lbx.selectedValue},set:function(e){this._lbx.selectedValue=e},enumerable:!0,configurable:!0}),e}(j);e.DropDown=j,e.ComboBox=A,e.ClarityModule=i,e.ɵa=T,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ui-components-light.umd.min.js.map
